{"version":3,"sources":["webpack:///./wp-content/themes/proximis/src/js/components/referencesSlider.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAgE;AAClB;;AAE9C;AACA;AACA,iCAAiC,6DAAK,EAAE,6BAA6B;AACrE;AACA;;AAEA,QAAQ,6DAAa;AACrB;AACA;;AAEA,wBAAwB,8BAA8B;AACtD;;AAEA;AACA,uDAAuD,OAAO;;AAE9D;AACA;AACA;AACA;AACA,uDAAuD;AACvD,aAAa;AACb,0BAA0B,KAAK,wBAAwB,wBAAwB;AAC/E,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA,gCAAgC,6DAAK,EAAE,yBAAyB,GAAG,GAAG;;AAEtE;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;;AAEA,wBAAwB,8BAA8B;AACtD;AACA,uDAAuD,OAAO;;AAE9D;AACA;AACA;AACA;AACA,uDAAuD;AACvD,aAAa;AACb,0BAA0B,KAAK,wBAAwB,wBAAwB;AAC/E,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC,6DAAK;AAC9C;AACA;AACA,iBAAiB;;AAEjB,mCAAmC,6DAAK;AACxC;AACA;AACA,iBAAiB;;AAEjB;;AAEA,qCAAqC,iDAAY;AACjD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB,gBAAgB,6CAAQ;AACxB;AACA,iBAAiB;;AAEjB;AACA,oBAAoB,6CAAQ;AAC5B;AACA,qBAAqB;AACrB;;AAEA;AACA,oBAAoB,6CAAQ;AAC5B;AACA,qBAAqB;AACrB;;AAEA;AACA,aAAa;AACb;;AAEA;AACA,+BAA+B,6DAAK,EAAE,oCAAoC;AAC1E,yCAAyC,6DAAK;AAC9C;AACA;AACA,SAAS;;AAET,eAAe,SAAS;AACxB,QAAQ,6CAAQ,gCAAgC,YAAY,OAAO,KAAK;;AAExE;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;;AAEe,+EAAgB,EAAC","file":"referencesSlider.js","sourcesContent":["import { superPolyfill, query, forEach } from '@stereorepo/sac';\nimport { TweenMax, TimelineLite } from 'gsap';\n\nclass referencesSlider {\n    constructor() {\n        [this.referenceSlider] = query({ selector: '.js-ref-slider' });\n        if (!this.referenceSlider) return;\n        this.currentReferenceId = 0;\n\n        superPolyfill.initializeWhatwgFetch();\n        this.getCurrentContext();\n    }\n\n    checkLoadingAction({ type = 'next', currentSlide }) {\n        this.currentReferenceId = currentSlide.dataset.refId;\n\n        const action = 'check_references';\n        const url = `/wp-admin/admin-ajax.php?action=${action}`;\n\n        fetch(url, {\n            method: 'POST',\n            headers: {\n                'Content-Type':\n                    'application/x-www-form-urlencoded; charset=utf-8'\n            },\n            body: `type=${type}&current_reference_id=${this.currentReferenceId}`\n        })\n            .then(res => {\n                return res.json();\n            })\n            .then(([id]) => {\n                const [slide] = query({ selector: `.js-ref-id-${id}` });\n\n                if (slide) {\n                } else {\n                    this.startLoadingAction();\n                }\n            });\n    }\n\n    startLoadingAction({ type = 'next', currentSlide }) {\n        const action = 'load_references';\n        const url = `/wp-admin/admin-ajax.php?action=${action}`;\n\n        fetch(url, {\n            method: 'POST',\n            headers: {\n                'Content-Type':\n                    'application/x-www-form-urlencoded; charset=utf-8'\n            },\n            body: `type=${type}&current_reference_id=${this.currentReferenceId}`\n        })\n            .then(res => res.text())\n            .then(response => {\n                currentSlide.insertAdjacentHTML('afterend', response);\n\n                let selector = '.js-ref-following-slide';\n                let xPercent = 0;\n                switch (type) {\n                    case 'prev':\n                        xPercent = -100;\n                        break;\n                    case 'next':\n                        xPercent = 100;\n                        break;\n                    default:\n                        xPercent = 100;\n                        break;\n                }\n\n                const [followingSlide] = query({\n                    selector,\n                    ctx: this.referenceSlider\n                });\n\n                const [oldSlide] = query({\n                    selector: '.js-ref-current-slide',\n                    ctx: this.referenceSlider\n                });\n\n                oldSlide.classList.remove('ref-slide-init');\n\n                const timeline = new TimelineLite({\n                    onComplete: () => {\n                        oldSlide.classList.remove('js-ref-current-slide');\n\n                        followingSlide.classList.remove(\n                            'js-ref-following-slide'\n                        );\n                        followingSlide.classList.add('js-ref-current-slide');\n                        this.getCurrentContext();\n                    }\n                });\n\n                TweenMax.set(followingSlide, {\n                    xPercent\n                });\n\n                timeline.add(\n                    TweenMax.to(oldSlide, 0.3, {\n                        xPercent: -xPercent\n                    })\n                );\n\n                timeline.add(\n                    TweenMax.to(followingSlide, 0.3, {\n                        xPercent: 0\n                    })\n                );\n\n                timeline.play();\n            });\n    }\n\n    getCurrentContext() {\n        const [currentSlide] = query({ selector: '.js-ref-current-slide' });\n        const [prevButton, nextButton] = query({\n            selector: '.js-button-hexagon',\n            ctx: currentSlide\n        });\n\n        const { height } = currentSlide.getBoundingClientRect();\n        TweenMax.to(this.referenceSlider, 0.3, { height: `${height}px` });\n\n        prevButton.addEventListener(\n            'click',\n            () => {\n                this.checkLoadingAction({\n                    type: 'prev',\n                    currentSlide\n                });\n            },\n            false\n        );\n        nextButton.addEventListener(\n            'click',\n            () => {\n                this.checkLoadingAction({\n                    type: 'next',\n                    currentSlide\n                });\n            },\n            false\n        );\n    }\n}\n\nexport default referencesSlider;\n"],"sourceRoot":""}