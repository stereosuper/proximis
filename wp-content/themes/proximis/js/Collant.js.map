{"version":3,"sources":["webpack:///./wp-content/themes/proximis/src/js/components/Collant.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAkE;;AAElE;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,2DAAW;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,eAAe;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,2DAAW;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,+CAA+C,YAAY;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,QAAQ,2DAAW;AACnB;AACA;AACA,SAAS;AACT;AACA;AACA,4BAA4B,6DAAK,EAAE,6BAA6B;AAChE;;AAEA,gCAAgC,6DAAK;AACrC;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,QAAQ,2DAAW;AACnB;AACA,SAAS;AACT;AACA;;AAEe,sEAAO,EAAC","file":"Collant.js","sourcesContent":["import { superScroll, query, superWindow } from '@stereorepo/sac';\n\nclass Collant {\n    constructor({\n        selector = '.js-collant-selector',\n        box = '.js-collant-box',\n        offsetTop = '0px',\n        offsetBottom = '0px'\n    }) {\n        this.collantSelector = selector;\n        this.boxSelector = box;\n        this.rawOffset = offsetBottom !== '0px' ? offsetBottom : offsetTop;\n        this.offsetPosition = offsetBottom !== '0px' ? 'bottom' : 'top';\n\n        this.collantElement = null;\n        this.boxElement = null;\n\n        this.boxBoundings = null;\n        this.collantBoundings = null;\n        this.windowPositions = null;\n        this.offset = 0;\n\n        this.scrollHandler = this.scrollHandler.bind(this);\n        this.stickIt = this.stickIt.bind(this);\n    }\n    computeOffsetPx() {\n        this.offset = parseInt(this.rawOffset.replace('px', ''), 10);\n    }\n    computeOffsetVh() {\n        this.offset =\n            (parseInt(this.rawOffset.replace('vh', ''), 10) * superWindow.h) /\n            100;\n    }\n    computeOffset() {\n        switch (true) {\n            case /px$/.test(this.rawOffset):\n                this.computeOffsetPx();\n                break;\n            case /vh$/.test(this.rawOffset):\n                this.computeOffsetVh();\n                break;\n\n            default:\n                break;\n        }\n    }\n    getOffsetParents(element) {\n        const { offsetParent } = element;\n        let offset = element.offsetTop;\n        if (offsetParent) {\n            offset += this.getOffsetParents(offsetParent);\n        }\n        return offset;\n    }\n    setBoundings() {\n        this.boxBoundings = this.boxElement.getBoundingClientRect();\n        this.collantBoundings = this.collantElement.getBoundingClientRect();\n    }\n    getWindowPosition() {\n        this.windowPositions = {\n            y: window.scrollY\n        };\n    }\n    resetCollantProperties() {\n        this.collantElement.style.removeProperty('top');\n        this.collantElement.style.removeProperty('bottom');\n        this.collantElement.style.removeProperty('position');\n    }\n    handleTopOffset() {\n        const scrollOffset = superScroll.scrollTop + this.offset;\n        const bottomDelimiter =\n            this.boxBoundings.y +\n            this.boxBoundings.height +\n            this.windowPositions.y -\n            this.collantBoundings.height;\n\n        this.resetCollantProperties();\n        if (scrollOffset > bottomDelimiter) {\n            this.collantElement.style.top = 'auto';\n            this.collantElement.style.bottom = '0px';\n            this.collantElement.style.position = 'absolute';\n        } else if (scrollOffset > this.collantDelimiter) {\n            this.collantElement.style.top = `${this.offset}px`;\n            this.collantElement.style.position = 'fixed';\n        }\n    }\n    handleBottomOffset() {}\n    scrollHandler() {\n        if (this.offsetPosition === 'top') {\n            this.handleTopOffset();\n        } else if (this.offsetPosition === 'bottom') {\n            this.handleBottomOffset();\n        }\n    }\n    resizeHandler() {\n        superWindow.addResizeEndFunction(() => {\n            this.getWindowPosition();\n            this.setBoundings();\n        });\n    }\n    stickIt() {\n        [this.boxElement] = query({ selector: this.boxSelector });\n        if (!this.boxElement) return;\n\n        [this.collantElement] = query({\n            selector: this.collantSelector,\n            ctx: this.boxElement\n        });\n        if (!this.collantElement) return;\n\n        this.computeOffset();\n        this.getWindowPosition();\n        this.setBoundings();\n\n        this.collantDelimiter = this.getOffsetParents(this.collantElement);\n\n        this.scrollHandler();\n        superScroll.addScrollFunction(() => {\n            this.scrollHandler();\n        });\n    }\n}\n\nexport default Collant;\n"],"sourceRoot":""}