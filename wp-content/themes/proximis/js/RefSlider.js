(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t,n){"use strict";n.r(t);var i=n(2),s=n(103),r=n(3),c=n(137),a=n(63);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,s=!1,r=void 0;try{for(var c,a=e[Symbol.iterator]();!(i=(c=a.next()).done)&&(n.push(c.value),!t||n.length!==t);i=!0);}catch(e){s=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(s)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}c.a;var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={transitioning:!1,sticky:!1},this.referenceSlider=null,this.loader=null,this.idsList=[],this.slugsList=[],this.collants=[],this.currentReferenceId=0,this.newReferenceId=0,this.type=null,this.currentSlide=null,this.resetContext=this.resetContext.bind(this),this.resizeHandler=this.resizeHandler.bind(this),i.e.initializeWhatwgFetch()}var t,n,c;return t=e,(n=[{key:"getAllSlideIds",value:function(e){var t=this,n="/wp-admin/admin-ajax.php?action=".concat("get_references_ids");fetch(n,{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).then(function(e){return e.json()}).then(function(n){var i=n.ids,s=n.slugs;t.idsList=[].concat(l(i)),t.slugsList=[].concat(l(s)),e()})}},{key:"selectFollowingElement",value:function(e){var t=e.id,n=void 0===t?null:t;null!==n?this.newReferenceId=n:this.findFollowingElement()}},{key:"findFollowingElement",value:function(){var e=this.idsList.indexOf(this.currentReferenceId);"next"===this.type?this.newReferenceId=e+2>this.idsList.length?this.idsList.slice(0,1):this.idsList.slice(e+1,e+2):"prev"===this.type&&(this.newReferenceId=e-1<0?this.idsList.slice(-1):this.idsList.slice(e-1,e-2))}},{key:"scrollToReference",value:function(){var e=window.scrollY+this.referenceSlider.getBoundingClientRect().top;r.d.to(window,.5,{scrollTo:{y:e},ease:a.b.easeInOut})}},{key:"changeLocationHash",value:function(e){var t=e.dataset.refSlug;window.location.hash=t}},{key:"checkLocationHash",value:function(){var e=window.location.hash;if(e){if(this.state.transitioning)return;var t=this.slugsList.indexOf(e.replace("#",""));this.newReferenceId=this.idsList[t],this.type="next",this.state.transitioning=!0,this.scrollToReference(),this.checkLoadingCall()}}},{key:"checkLoadingCall",value:function(){if(this.newReferenceId!==this.currentReferenceId){var e=o(Object(i.c)({selector:".js-ref-id-".concat(this.newReferenceId)}),1)[0];e?(e.classList.add("js-ref-following-slide"),this.slideAnimation()):this.startLoadingAction()}else this.newReferenceId=null,this.type=null,this.state.transitioning=!1}},{key:"stickElements",value:function(){this.state.sticky=!0,Object(i.b)(this.collants,function(e){e.stickIt()})}},{key:"unstickElements",value:function(){Object(i.b)(this.collants,function(e){e.ripIt()}),this.state.sticky=!1}},{key:"startLoadingAction",value:function(){var e=this;this.loader.classList.add("loading");var t="/wp-admin/admin-ajax.php?action=".concat("load_references");fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:"new_reference_id=".concat(this.newReferenceId)}).then(function(e){return e.text()}).then(function(t){e.currentSlide.insertAdjacentHTML("afterend",t),e.slideAnimation()})}},{key:"slideAnimation",value:function(){var e=this,t=0;switch(this.type){case"prev":t=-100;break;case"next":default:t=100}var n=o(Object(i.c)({selector:".js-ref-following-slide",ctx:this.referenceSlider}),1)[0],s=o(Object(i.c)({selector:".js-ref-current-slide",ctx:this.referenceSlider}),1)[0];this.changeLocationHash(n),s.classList.remove("ref-slide-init"),r.e.set(n,{xPercent:t}),r.e.set(n,{xPercent:t}),r.e.to(s,.5,{xPercent:-t,ease:a.b.easeInOut,force3D:!0,onStart:function(){r.e.to(n,.5,{xPercent:0,ease:a.b.easeInOut,force3D:!0,onComplete:e.resetContext})}})}},{key:"resetContext",value:function(){var e=o(Object(i.c)({selector:".js-ref-current-slide"},this.referenceSlider),1)[0],t=o(Object(i.c)({selector:".js-ref-following-slide"},this.referenceSlider),1)[0];e.classList.remove("js-ref-current-slide"),t.classList.remove("js-ref-following-slide"),t.classList.add("js-ref-current-slide"),this.loader.classList.remove("loading"),r.e.set(t,{clearProps:"all"}),this.currentReferenceId=0,this.newReferenceId=0,this.type=null,this.currentSlide=null,this.state.transitioning=!1,this.setCurrentContext()}},{key:"setCurrentContext",value:function(){var e=this;if(!(this.idsList.length<2)){this.unstickElements(),this.collants=[];var t=o(Object(i.c)({selector:".js-ref-current-slide"}),1);this.currentSlide=t[0],this.currentReferenceId=parseInt(this.currentSlide.dataset.refId,10);var n=o(Object(i.c)({selector:".js-button-hexagon",ctx:this.currentSlide}),2),c=n[0],d=n[1],h=this.currentSlide.getBoundingClientRect().height;r.e.to(this.referenceSlider,.3,{height:"".concat(h,"px"),ease:a.b.easeInOut,force3D:!0,onComplete:function(){r.e.set(e.referenceSlider,{clearProps:"transform"})}}),c.addEventListener("click",function(){e.state.transitioning||(e.type="prev",e.changeSlide())},!1),d.addEventListener("click",function(){e.state.transitioning||(e.type="next",e.changeSlide())},!1),!this.state.sticky&&i.g.windowWidth>a.a.horizontal.xl&&(this.collants=[].concat(l(this.collants),[new s.a({ctx:this.currentSlide,selector:".js-nav-btn",box:".js-ref-first-part",offsetTop:"100px"}),new s.a({ctx:this.currentSlide,selector:".js-btn-download",box:".js-ref-content-wrapper",offsetTop:"160px"}),new s.a({ctx:this.currentSlide,selector:".js-infos-datas",box:".js-content-btn-infos",offsetTop:"25px"})]),this.stickElements())}}},{key:"changeSlide",value:function(){this.state.transitioning=!0,this.findFollowingElement(),this.checkLoadingCall()}},{key:"initializeCaseStudyClickEvent",value:function(){var e=this,t=Object(i.c)({selector:".js-case-study"});Object(i.b)(t,function(t){t.addEventListener("click",function(n){if(n.preventDefault(),!e.state.transitioning){var i=parseInt(t.dataset.refId,10);e.scrollToReference(),e.selectFollowingElement({id:i}),e.checkLoadingCall()}},!1)})}},{key:"resizeHandler",value:function(){!this.state.sticky&&i.g.windowWidth>a.a.horizontal.xl?this.stickElements():this.state.sticky&&i.g.windowWidth<=a.a.horizontal.xl&&this.unstickElements()}},{key:"initialize",value:function(){var e=this,t=o(Object(i.c)({selector:".js-ref-slider"}),1);if(this.referenceSlider=t[0],this.referenceSlider){var n=o(Object(i.c)({selector:".js-loader",ctx:this.referenceSlider}),1);this.loader=n[0],this.getAllSlideIds(function(){e.initializeCaseStudyClickEvent(),e.setCurrentContext(),e.checkLocationHash()}),i.g.addResizeEndFunction(this.resizeHandler)}}}])&&d(t.prototype,n),c&&d(t,c),e}();t.default=h}}]);